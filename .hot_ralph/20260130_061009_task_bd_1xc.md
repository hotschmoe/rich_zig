I'll implement background color support for syntax highlighting code blocks. Let me first understand the current implementation.Now let me look at the SyntaxTheme struct to understand how themes are structured. I can see it has foreground colors for different token types. I need to add a `background_color` field to `SyntaxTheme` and apply it to all segments during rendering.

Let me also check how the Style module handles backgrounds:The Style module has `background(c: Color)` method to set background color. Now I understand the approach:

1. Add a `background_color` field to `SyntaxTheme` (optional, `?Color`)
2. Update the predefined themes (monokai, dracula) with appropriate background colors
3. Modify the rendering to apply the background color to all segments

Let me implement this:Now I need to update the `render` function to apply the background color to all segments. Let me look at how segments are created and apply the background:I see the architecture. The best approach is to apply the background color to each segment as they're added. I'll modify the render function to apply the background after all segments are created. This keeps the code clean and ensures all segments get the background.

Let me update the `render` function to apply backgrounds to all segments at the end:Now I need to update the `highlightLine` methods to apply the background color. But looking at the flow, there are two paths:
1. With word wrap: segments go through `highlightLine`, then `wrapSegments`, then background is applied
2. Without word wrap: segments go directly from `highlightLine` to the main segments list

For the non-word-wrap path, I need to apply backgrounds in the `highlightLine` method. Let me update the helper methods to apply backgrounds:Now I need to update the highlighter methods to use `styledSegment` instead of `Segment.styled`. Let me update `highlightZig`:I need to update all the `Segment.styled` calls to use `self.styledSegment`. Let me do this in batches:Now let me update `highlightJson`:Now let me update `highlightMarkdown`:Now I need to add a test for the background color feature. Let me find a good spot for it and add a test:Let me add a test for the background color feature after the theme test:Now let's run the tests to make sure everything compiles and works:All tests pass. Let me run the syntax tests specifically to verify the new background color functionality:All 597 tests pass, including the new background color tests. Let me verify the implementation by checking what we've added:The implementation is complete. Now let me commit the changes:The task is complete. Here's a summary of what was implemented:

**Syntax: Add background color**

Added background color support for syntax highlighting code blocks:

1. **SyntaxTheme struct** (`src/renderables/syntax.zig:360`): Added `background_color: ?Color = null` field

2. **Theme helper methods** (`src/renderables/syntax.zig:397-410`):
   - `applyBackground(style: Style) Style` - applies theme background to a style
   - `applyBackgroundOpt(style: ?Style) ?Style` - applies theme background to optional style

3. **Predefined themes updated**:
   - `monokai`: Background `#272822` (dark gray)
   - `dracula`: Background `#282a36` (dark blue-gray)
   - `default`: No background (null)

4. **Rendering integration**: All segment creation methods now apply the theme's background color

5. **Tests added**: 6 new tests verifying background color functionality