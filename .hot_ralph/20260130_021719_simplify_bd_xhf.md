I'll review the recent code changes for the fenced code blocks feature and simplify if needed.Now let me read the full markdown.zig file to understand the context better and look for simplification opportunities.Now let me also look at the syntax.zig changes.Now I have a good picture of the changes. Let me run the tests first to make sure everything is working correctly.All tests pass. Now let me analyze the code for simplification opportunities.

After reviewing the code changes, I've identified a few areas that could be simplified:

1. **Duplicated code in `Markdown.render`**: The code block rendering logic appears twice (once for closed code blocks and once for unclosed blocks at the end). This can be extracted into a helper function.

2. **`renderDuped` in syntax.zig**: The pointer comparison `seg.text.ptr != "\n".ptr` is a bit fragile - it relies on string literal interning. It would be cleaner and more robust to check if the text is a newline by content.

Let me make these simplifications.Now let me fix the `renderDuped` function in syntax.zig to use a more robust check:Let me check if Segment has an `isControl()` method or what the proper way to check for newlines is:There's an `isControl()` method. Let me verify it includes newlines by checking its implementation:I see - `isControl()` checks if it has a `.control` field. Let me check what `Segment.line()` returns:Ah, `Segment.line()` returns a plain segment with text `"\n"`, not a control segment. So the original check `seg.text.ptr != "\n".ptr` was comparing pointer addresses to check if it's a string literal newline.

The issue is that `isControl()` won't catch newlines since `Segment.line()` doesn't set the control field. Let me revert to a cleaner approach that checks the text content directly:Now let's run the tests to verify everything still works:All tests pass. Let me update the todo list and verify the changes make sense:Let me view the diff to confirm the changes look correct:The changes look good:

1. **markdown.zig**: Extracted duplicated code block rendering into `emitCodeBlock()` helper function, reducing code duplication from two nearly identical blocks to two single-line calls.

2. **syntax.zig**: Changed the newline check from pointer comparison (`seg.text.ptr != "\n".ptr`) to content comparison (`!std.mem.eql(u8, seg.text, "\n")`). This is more robust because pointer comparison relies on string literal interning which is implementation-defined behavior.

Now let me commit the simplification changes:Done. I reviewed the fenced code blocks feature implementation and made two simplifications:

**Changes made:**

1. **markdown.zig:213-282** - Extracted the duplicated code block rendering logic into a new `emitCodeBlock()` helper function. The same 9-line block was repeated twice (for closed and unclosed code blocks), now replaced with single-line calls.

2. **syntax.zig:232** - Changed the newline detection from fragile pointer comparison (`seg.text.ptr != "\n".ptr`) to robust content comparison (`!std.mem.eql(u8, seg.text, "\n")`). The original relied on string literal interning which is implementation-defined.

All tests pass and the changes have been committed as `ef26cb5`.